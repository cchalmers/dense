<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Dense.TH</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Dense-TH.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Data.Dense.TH.html">Source</a></li><li><a href="/package/dense">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">dense-0.1.0.0: Mutable and immutable dense multidimensional arrays</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) Christopher Chalmers</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>Christopher Chalmers</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Dense.TH</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Creating dense arrays</a></li><li><a href="#g:2">Fixed length vector</a></li><li><a href="#g:3">Stencils</a><ul><li><a href="#g:4">Stencils from lists</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Contains QuasiQuotes and TemplateHaskell utilities for creating dense
 arrays, stencils and fixed length vectors.</p><p>The parser for the QuasiQuotes is still a work in progress.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:dense">dense</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Quote.html#t:QuasiQuoter">QuasiQuoter</a></li><li class="src short"><a href="#v:v">v</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Quote.html#t:QuasiQuoter">QuasiQuoter</a></li><li class="src short"><a href="#v:stencil">stencil</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Quote.html#t:QuasiQuoter">QuasiQuoter</a></li><li class="src short"><span class="keyword">class</span> <a href="Data-Dense-Index.html#t:Shape">Shape</a> f =&gt; <a href="#t:ShapeLift">ShapeLift</a> f <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><a href="#v:mkStencilTH">mkStencilTH</a> :: (<a href="Data-Dense-TH.html#t:ShapeLift">ShapeLift</a> f, <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a) =&gt; [(f <a href="/package/base-4.9.0.0/docs/Data-Int.html#t:Int">Int</a>, a)] -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:mkStencilTHBy">mkStencilTHBy</a> :: <a href="Data-Dense-TH.html#t:ShapeLift">ShapeLift</a> f =&gt; (a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a>) -&gt; [(f <a href="/package/base-4.9.0.0/docs/Data-Int.html#t:Int">Int</a>, a)] -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a></li></ul></div><div id="interface"><h1 id="g:1">Creating dense arrays</h1><div class="top"><p class="src"><a id="v:dense" class="def">dense</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Quote.html#t:QuasiQuoter">QuasiQuoter</a> <a href="src/Data.Dense.TH.html#dense" class="link">Source</a> <a href="#v:dense" class="selflink">#</a></p><div class="doc"><p>QuasiQuoter for producing a dense arrays using a custom parser.
   Values are space separated, while also allowing infix expressions
   (like <code>5/7</code>). If you want to apply a function, it should be done in
   brackets. Supports 1D, 2D and 3D arrays.</p><p>The number of rows/columns must be consistent thought out the
   array.</p><h3 id="control.ch:dense0" class="caption expander" onclick="toggleSection('ch:dense0')">Examples</h3><div id="section.ch:dense0" class="hide"><ul><li>1D arrays are of the following form form. Note these can be
     used as <code><a href="Data-Dense.html#t:V1">V1</a></code>, <code><a href="Data-Dense.html#t:V2">V2</a></code> or <code><a href="Data-Dense.html#t:V3">V3</a></code> arrays.</li></ul><pre>[<code><a href="Data-Dense-TH.html#v:dense">dense</a></code>| 5 -3 1 -3 5 |] :: (<code><a href="Data-Dense.html#t:R1">R1</a></code> f, <code><a href="/package/vector-0.11.0.0/docs/Data-Vector.html#t:Vector">Vector</a></code> v a, <code><a href="/package/base-4.9.0.0/docs/Prelude.html#t:Num">Num</a></code> a) =&gt; <code><a href="Data-Dense.html#v:Array">Array</a></code> v f a
</pre><ul><li>2D arrays are of the following form. Note these can be used as
     <code><a href="Data-Dense.html#t:V2">V2</a></code> or <code><a href="Data-Dense.html#t:V3">V3</a></code> arrays.</li></ul><pre>chars :: <code><a href="Data-Dense.html#v:UArray">UArray</a></code> <code><a href="Data-Dense.html#t:V2">V2</a></code> <code><a href="/package/base-4.9.0.0/docs/Data-Char.html#t:Char">Char</a></code>
chars :: [<code><a href="Data-Dense-TH.html#v:dense">dense</a></code>|
  'a' 'b' 'c'
  'd' 'e' 'f'
  'g' 'h' 'i'
|]
</pre><ul><li>3D arrays are of the following form. Note the order in which
     <code><a href="Data-Dense-TH.html#v:dense">dense</a></code> formats the array. The array <code>a</code> is such that <code>a ! <code><a href="Data-Dense.html#t:V3">V3</a></code>
     x y z = &quot;xyz&quot;</code></li></ul><pre>a :: <code><a href="Data-Dense.html#v:BArray">BArray</a></code> <code><a href="Data-Dense.html#t:V3">V3</a></code> <code><a href="/package/base-4.9.0.0/docs/Data-String.html#t:String">String</a></code>
a = [<code><a href="Data-Dense-TH.html#v:dense">dense</a></code>|
  &quot;000&quot; &quot;100&quot; &quot;200&quot;
  &quot;010&quot; &quot;110&quot; &quot;210&quot;
  &quot;020&quot; &quot;120&quot; &quot;220&quot;

  &quot;001&quot; &quot;101&quot; &quot;201&quot;
  &quot;011&quot; &quot;111&quot; &quot;211&quot;
  &quot;021&quot; &quot;121&quot; &quot;221&quot;

  &quot;002&quot; &quot;102&quot; &quot;202&quot;
  &quot;012&quot; &quot;112&quot; &quot;212&quot;
  &quot;022&quot; &quot;122&quot; &quot;222&quot;
|]
</pre></div></div></div><h1 id="g:2">Fixed length vector</h1><div class="top"><p class="src"><a id="v:v" class="def">v</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Quote.html#t:QuasiQuoter">QuasiQuoter</a> <a href="src/Data.Dense.TH.html#v" class="link">Source</a> <a href="#v:v" class="selflink">#</a></p><div class="doc"><p>Type safe <code><a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Quote.html#t:QuasiQuoter">QuasiQuoter</a></code> for fixed length vectors <code><a href="/package/linear-1.20.5/docs/Linear-V.html#t:V">V</a></code>. Values are
   space separated. Can be used as expressions or patterns.</p><pre>[v| x y z w q r |] :: <code><a href="/package/linear-1.20.5/docs/Linear-V.html#t:V">V</a></code> 6 a
</pre><p>Note this requires <code>DataKinds</code>. Also requires <code>ViewPatterns</code> if <code><a href="Data-Dense-TH.html#v:v">v</a></code>
   is used as a pattern.</p><h3 id="control.ch:v0" class="caption expander" onclick="toggleSection('ch:v0')">Examples</h3><div id="section.ch:v0" class="hide"><pre>&gt;&gt;&gt; let a = [v| 1 2 3 4 5 |]
&gt;&gt;&gt; :t a
a :: Num a =&gt; V 5 a
&gt;&gt;&gt; a
V {toVector = [1,2,3,4,5]}
&gt;&gt;&gt; let f [v| a b c d e |] = (a,b,c,d,e)
&gt;&gt;&gt; :t f
f :: V 5 t -&gt; (t, t, t, t, t)
&gt;&gt;&gt; f a
(1,2,3,4,5)
</pre><p>Variables and infix expressions are also allowed. Negative values can
 be expressed by a leading <code>-</code> with a space before but no space
 after.</p><pre>&gt;&gt;&gt; let b x = [v| 1/x 2 / x (succ x)**2 x-2 x - 3 -x |]
&gt;&gt;&gt; b Debug.SimpleReflect.a
V {toVector = [1 / a,2 / a,succ a**2,a - 2,a - 3,negate a]}
</pre></div></div></div><h1 id="g:3">Stencils</h1><div class="top"><p class="src"><a id="v:stencil" class="def">stencil</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Quote.html#t:QuasiQuoter">QuasiQuoter</a> <a href="src/Data.Dense.TH.html#stencil" class="link">Source</a> <a href="#v:stencil" class="selflink">#</a></p><div class="doc"><p>QuasiQuoter for producing a static stencil definition. This is a
   versatile parser for 1D, 2D and 3D stencils. The parsing is similar
   to <code><a href="Data-Dense-TH.html#v:dense">dense</a></code> but <code><a href="Data-Dense-TH.html#v:stencil">stencil</a></code> also supports <code>_</code>, which means ignore this
   element. Also, stencils should have an odd length in all dimensions
   so there is always a center element (which is used as <code><a href="Data-Dense.html#v:zero">zero</a></code>).</p><h3 id="control.ch:stencil0" class="caption expander" onclick="toggleSection('ch:stencil0')">Examples</h3><div id="section.ch:stencil0" class="hide"><ul><li>1D stencils are of the form</li></ul><pre>[<code><a href="Data-Dense-TH.html#v:stencil">stencil</a></code>| 5 -3 1 -3 5 |] :: <code><a href="/package/base-4.9.0.0/docs/Prelude.html#t:Num">Num</a></code> a =&gt; <code><a href="Data-Dense-Stencil.html#t:Stencil">Stencil</a></code> <code><a href="Data-Dense.html#t:V1">V1</a></code> a
</pre><ul><li>2D stencils are of the form</li></ul><pre>myStencil2 :: <code><a href="/package/base-4.9.0.0/docs/Prelude.html#t:Num">Num</a></code> a =&gt; <code><a href="Data-Dense-Stencil.html#t:Stencil">Stencil</a></code> <code><a href="Data-Dense.html#t:V2">V2</a></code> a
myStencil2 = [<code><a href="Data-Dense-TH.html#v:stencil">stencil</a></code>|
  0 1 0
  1 0 1
  0 1 0
|]
</pre><ul><li>3D stencils have gaps between planes.</li></ul><pre>myStencil3 :: <code><a href="/package/base-4.9.0.0/docs/Prelude.html#t:Fractional">Fractional</a></code> a =&gt; <code><a href="Data-Dense-Stencil.html#t:Stencil">Stencil</a></code> <code><a href="Data-Dense.html#t:V3">V3</a></code> a
myStencil3 :: [<code><a href="Data-Dense-TH.html#v:stencil">stencil</a></code>|
  1/20 3/10 1/20
  3/10  1   3/10
  1/20 3/10 1/20

  3/10  1   3/10
   1    _    1
  3/10  1   3/10

  1/20 3/10 1/20
  3/10  1   3/10
  1/20 3/10 1/20
|]
</pre><p>Variables can also be used</p><pre>myStencil2' :: a -&gt; a -&gt; a -&gt; <code><a href="Data-Dense-Stencil.html#t:Stencil">Stencil</a></code> <code><a href="Data-Dense.html#t:V2">V2</a></code> a
myStencil2' a b c = [<code><a href="Data-Dense-TH.html#v:stencil">stencil</a></code>|
  c b c
  b a b
  c b c
|]
</pre></div></div></div><h2 id="g:4">Stencils from lists</h2><div class="top"><p class="src"><span class="keyword">class</span> <a href="Data-Dense-Index.html#t:Shape">Shape</a> f =&gt; <a id="t:ShapeLift" class="def">ShapeLift</a> f <span class="keyword">where</span> <a href="src/Data.Dense.TH.html#ShapeLift" class="link">Source</a> <a href="#t:ShapeLift" class="selflink">#</a></p><div class="doc"><p>Class of shapes that can be <code><a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#v:lift">lift</a></code>ed.</p><p>This is to prevent orphans for the <code><a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a></code> class.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Data-Dense-TH.html#v:liftShape">liftShape</a>, <a href="Data-Dense-TH.html#v:liftShape-39-">liftShape'</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:liftShape" class="def">liftShape</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; f a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape" class="link">Source</a> <a href="#v:liftShape" class="selflink">#</a></p><div class="doc"><p><code><a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#v:lift">lift</a></code> for <code><a href="Data-Dense-Index.html#t:Shape">Shape</a></code>s.</p></div><p class="src"><a id="v:liftShape-39-" class="def">liftShape'</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; f a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape%27" class="link">Source</a> <a href="#v:liftShape-39-" class="selflink">#</a></p><div class="doc"><p>Polymorphic <code><a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#v:lift">lift</a></code> for a <code><a href="Data-Dense-Index.html#t:Shape">Shape</a></code>s.</p></div></div><div class="subs instances"><p id="control.i:ShapeLift" class="caption collapser" onclick="toggleSection('i:ShapeLift')">Instances</p><div id="section.i:ShapeLift" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:ShapeLift:ShapeLift:1" class="instance expander" onclick="toggleSection('i:ic:ShapeLift:ShapeLift:1')"></span> <a href="Data-Dense-TH.html#t:ShapeLift">ShapeLift</a> <a href="Data-Dense.html#t:V4">V4</a></span> <a href="src/Data.Dense.TH.html#line-696" class="link">Source</a> <a href="#t:ShapeLift" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:ShapeLift:ShapeLift:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftShape">liftShape</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; <a href="Data-Dense.html#t:V4">V4</a> a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape" class="link">Source</a> <a href="#v:liftShape" class="selflink">#</a></p><p class="src"><a href="#v:liftShape-39-">liftShape'</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; <a href="Data-Dense.html#t:V4">V4</a> a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape%27" class="link">Source</a> <a href="#v:liftShape-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:ShapeLift:ShapeLift:2" class="instance expander" onclick="toggleSection('i:ic:ShapeLift:ShapeLift:2')"></span> <a href="Data-Dense-TH.html#t:ShapeLift">ShapeLift</a> <a href="Data-Dense.html#t:V3">V3</a></span> <a href="src/Data.Dense.TH.html#line-692" class="link">Source</a> <a href="#t:ShapeLift" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:ShapeLift:ShapeLift:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftShape">liftShape</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; <a href="Data-Dense.html#t:V3">V3</a> a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape" class="link">Source</a> <a href="#v:liftShape" class="selflink">#</a></p><p class="src"><a href="#v:liftShape-39-">liftShape'</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; <a href="Data-Dense.html#t:V3">V3</a> a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape%27" class="link">Source</a> <a href="#v:liftShape-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:ShapeLift:ShapeLift:3" class="instance expander" onclick="toggleSection('i:ic:ShapeLift:ShapeLift:3')"></span> <a href="Data-Dense-TH.html#t:ShapeLift">ShapeLift</a> <a href="Data-Dense.html#t:V2">V2</a></span> <a href="src/Data.Dense.TH.html#line-688" class="link">Source</a> <a href="#t:ShapeLift" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:ShapeLift:ShapeLift:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftShape">liftShape</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; <a href="Data-Dense.html#t:V2">V2</a> a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape" class="link">Source</a> <a href="#v:liftShape" class="selflink">#</a></p><p class="src"><a href="#v:liftShape-39-">liftShape'</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; <a href="Data-Dense.html#t:V2">V2</a> a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape%27" class="link">Source</a> <a href="#v:liftShape-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:ShapeLift:ShapeLift:4" class="instance expander" onclick="toggleSection('i:ic:ShapeLift:ShapeLift:4')"></span> <a href="Data-Dense-TH.html#t:ShapeLift">ShapeLift</a> <a href="Data-Dense.html#t:V1">V1</a></span> <a href="src/Data.Dense.TH.html#line-684" class="link">Source</a> <a href="#t:ShapeLift" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:ShapeLift:ShapeLift:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftShape">liftShape</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; <a href="Data-Dense.html#t:V1">V1</a> a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape" class="link">Source</a> <a href="#v:liftShape" class="selflink">#</a></p><p class="src"><a href="#v:liftShape-39-">liftShape'</a> :: <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a =&gt; <a href="Data-Dense.html#t:V1">V1</a> a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#liftShape%27" class="link">Source</a> <a href="#v:liftShape-39-" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:mkStencilTH" class="def">mkStencilTH</a> :: (<a href="Data-Dense-TH.html#t:ShapeLift">ShapeLift</a> f, <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift">Lift</a> a) =&gt; [(f <a href="/package/base-4.9.0.0/docs/Data-Int.html#t:Int">Int</a>, a)] -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#mkStencilTH" class="link">Source</a> <a href="#v:mkStencilTH" class="selflink">#</a></p><div class="doc"><p>Construct a <code><a href="Data-Dense-Stencil.html#t:Stencil">Stencil</a></code> by unrolling the list at compile time. For
   example</p><pre><code><a href="/package/lens-4.14/docs/Control-Lens-Indexed.html#v:ifoldr">ifoldr</a></code> f b $(<code><a href="Data-Dense-TH.html#v:mkStencilTH">mkStencilTH</a></code> [(<code><a href="Data-Dense.html#t:V1">V1</a></code> (-1), 5), (<code><a href="Data-Dense.html#t:V1">V1</a></code> 0, 3), (<code><a href="Data-Dense.html#t:V1">V1</a></code> 1, 5)])
</pre><p>will be get turned into</p><pre>f (<code><a href="Data-Dense.html#t:V1">V1</a></code> (-1)) 5 (f (<code><a href="Data-Dense.html#t:V1">V1</a></code> 0) 3 (f (<code><a href="Data-Dense.html#t:V1">V1</a></code> 1) 5 b))
</pre><p>at compile time. Since there are no loops and all target indexes
   are known at compile time, this can lead to more optimisations and
   faster execution times. This can lead to around a 2x speed up
   compared to folding over unboxed vectors.</p><pre>myStencil = $(<code><a href="Data-Dense-TH.html#v:mkStencilTH">mkStencilTH</a></code> (as :: [(f <code><a href="/package/base-4.9.0.0/docs/Data-Int.html#t:Int">Int</a></code>, a)])) :: <code><a href="Data-Dense-Stencil.html#t:Stencil">Stencil</a></code> f a
</pre></div></div><div class="top"><p class="src"><a id="v:mkStencilTHBy" class="def">mkStencilTHBy</a> :: <a href="Data-Dense-TH.html#t:ShapeLift">ShapeLift</a> f =&gt; (a -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a>) -&gt; [(f <a href="/package/base-4.9.0.0/docs/Data-Int.html#t:Int">Int</a>, a)] -&gt; <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="src/Data.Dense.TH.html#mkStencilTHBy" class="link">Source</a> <a href="#v:mkStencilTHBy" class="selflink">#</a></p><div class="doc"><p><code><a href="Data-Dense-TH.html#v:mkStencilTH">mkStencilTH</a></code> with a custom <code><a href="/package/template-haskell-2.11.0.0/docs/Language-Haskell-TH-Syntax.html#v:lift">lift</a></code> function for <code>a</code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>